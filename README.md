# Telegram Notes Bot

Телеграм-бот для сохранения текстовых сообщений в markdown заметки, организованные по датам.

## Возможности

- Принимает текстовые сообщения от авторизованного пользователя
- Сохраняет сообщения в markdown файлы с названием в формате `dd-Mmm-yyyy` (например, `11-Oct-2025.md`)
- Автоматически создает новые файлы для каждого дня
- Добавляет сообщения через пустую строку в существующий файл
- Все заметки хранятся в папке `notes`

## Установка и запуск

### 1. Создайте Telegram бота

1. Найдите [@BotFather](https://t.me/botfather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям и получите токен бота
4. Узнайте свой Telegram ID (можно через [@userinfobot](https://t.me/userinfobot))

### 2. Настройте окружение

Создайте файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

Отредактируйте `.env` и укажите:
- `BOT_TOKEN` - токен вашего бота от BotFather
- `ROOT_ID` - ваш Telegram ID (только вы сможете использовать бота)

### 3. Запустите бота с Docker

```bash
docker-compose up -d
```

### 4. Альтернативный запуск без Docker

Если хотите запустить бота локально без Docker:

```bash
# Установите Poetry, если еще не установлен
curl -sSL https://install.python-poetry.org | python3 -

# Установите зависимости
poetry install

# Запустите бота
poetry run python bot.py
```

### 5. Проверьте работу

Отправьте любое текстовое сообщение боту в Telegram. Оно должно сохраниться в файл `notes/dd-Mmm-yyyy.md`.

## Управление

### Просмотр логов

```bash
docker-compose logs -f
```

### Остановка бота

```bash
docker-compose down
```

### Перезапуск бота

```bash
docker-compose restart
```

### Обновление зависимостей

```bash
poetry update
```

## Структура проекта

```
telegram-notes-bot/
├── bot.py              # Основной код бота
├── pyproject.toml      # Poetry конфигурация и зависимости
├── poetry.lock         # Зафиксированные версии зависимостей
├── Dockerfile         # Docker образ
├── docker-compose.yml # Docker Compose конфигурация
├── .env              # Переменные окружения (создать вручную)
├── .env.example      # Шаблон для .env
├── .gitignore        # Игнорируемые файлы
└── notes/            # Папка с заметками (создается автоматически)
```

## Формат заметок

Каждое сообщение добавляется в файл текущего дня. Сообщения разделяются пустой строкой.

Пример файла `11-Oct-2025.md`:
```
Первое сообщение дня

Второе сообщение

Третье сообщение
```

## Технологии

- **Python 3.11** - язык программирования
- **Poetry** - управление зависимостями
- **python-telegram-bot** - библиотека для работы с Telegram Bot API
- **python-dotenv** - загрузка переменных окружения
- **Docker & Docker Compose** - контейнеризация

## Безопасность

- Бот обрабатывает сообщения только от пользователя с ID, указанным в `ROOT_ID`
- Файл `.env` с токенами не должен попадать в систему контроля версий
- Папка `notes` также исключена из git для защиты личных данных